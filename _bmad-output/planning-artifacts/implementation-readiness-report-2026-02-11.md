---
project: neweast
date: 2026-02-11
stepsCompleted: [step-01-document-discovery, step-02-prd-analysis, step-03-epic-coverage-validation, step-04-ux-alignment, step-05-epic-quality-review, step-06-final-assessment]
filesIncluded:
  prd: [prd.md, prd-appendix-legacy-inputs.md]
  architecture: [architecture.md]
  epics: [epics.md]
  ux: [ux-design-specification.md]
---

# Implementation Readiness Assessment Report

**Date:** 2026-02-11
**Project:** neweast

## 1. Document Inventory

### PRD Files
- `_bmad-output/planning-artifacts/prd.md` (主 PRD)
- `_bmad-output/planning-artifacts/prd-appendix-legacy-inputs.md` (PRD 补充材料)

### Architecture Files
- `_bmad-output/planning-artifacts/architecture.md`

### Epics & Stories Files
- `_bmad-output/planning-artifacts/epics.md`

### UX Files
- `_bmad-output/planning-artifacts/ux-design-specification.md`

### Discovery Notes
- 未发现 sharded (`*/index.md`) 格式文档。
- 未发现 whole + sharded 并存冲突。
- 文档清单已由用户确认，可进入下一步验证。

## 2. PRD Analysis

### Functional Requirements

FR1:
- 需求陈述: 用户可以使用手机号+密码登录系统。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR2:
- 需求陈述: 用户可以使用手机号+验证码登录系统。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR3:
- 需求陈述: 用户可以刷新登录会话并保持访问连续性。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR4:
- 需求陈述: 用户可以退出当前会话。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR5:
- 需求陈述: 用户可以修改密码并在会话更新后重新登录。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR6:
- 需求陈述: 系统可以根据登录入口识别访问域（平台域或组织域）。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR7:
- 需求陈述: 多组织用户可以在登录后选择目标组织再进入工作台。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR8:
- 需求陈述: 组织用户可以在会话内切换组织。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR9:
- 需求陈述: 系统可以在用户无有效域权限时拒绝进入对应域，并返回错误码 `AUTH-403-NO-DOMAIN` 与标准提示文案。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。


FR10:
- 需求陈述: 平台管理员可以创建组织并指定组织负责人。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR11:
- 需求陈述: 平台管理员可以维护组织状态（启用/禁用）。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR12:
- 需求陈述: 平台管理员可以变更组织负责人。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR13:
- 需求陈述: 平台管理员可以创建与维护平台用户。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR14:
- 需求陈述: 平台管理员可以维护平台用户状态。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR15:
- 需求陈述: 平台管理员可以创建与维护平台角色（受保护系统角色除外编辑/删除）。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR16:
- 需求陈述: 平台管理员可以配置平台角色权限树。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR17:
- 需求陈述: 平台管理员可以向平台用户分配1 至 5 个平台角色。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR18:
- 需求陈述: 新增平台成员在分配1 至 5 个平台角色后，可以进入平台并执行授权范围内操作。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。


FR19:
- 需求陈述: 组织负责人/组织管理员可以创建与维护组织成员。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR20:
- 需求陈述: 组织负责人/组织管理员可以维护组织成员状态。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR21:
- 需求陈述: 组织负责人/组织管理员可以创建与维护组织角色（受保护系统角色除外编辑/删除）。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR22:
- 需求陈述: 组织负责人/组织管理员可以配置组织角色权限树。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR23:
- 需求陈述: 组织负责人/组织管理员可以向组织成员分配1 至 5 个组织角色。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR24:
- 需求陈述: 组织负责人/组织管理员可以维护成员的组织内资料（如显示名、部门）。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR25:
- 需求陈述: 负责人变更后，新负责人可以立即完成组织治理接管。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。


FR26:
- 需求陈述: 系统可以维护平台域与组织域独立的权限命名空间与授权边界。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR27:
- 需求陈述: 系统可以按有效权限控制菜单、按钮与受保护操作的可访问性。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR28:
- 需求陈述: 系统可以对未授权访问执行一致性拒绝。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR29:
- 需求陈述: 系统可以在权限计算中排除禁用角色。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR30:
- 需求陈述: 系统可以在角色或授权变更后即时反映最新访问结果。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR31:
- 需求陈述: 系统可以阻止仅平台身份且无组织关系的用户进入组织工作台。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。


FR32:
- 需求陈述: 系统可以在组织新增成员时复用已存在全局用户身份。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR33:
- 需求陈述: 系统可以为同一用户在不同组织维护独立成员关系与角色绑定。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR34:
- 需求陈述: 系统可以在成员离组后支持后续重新入组并形成新的有效成员关系。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR35:
- 需求陈述: 系统可以在组织负责人变更时自动完成必要的成员关系与角色关系补齐。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。


FR36:
- 需求陈述: 系统可以支持入站与出站的外部系统通信能力。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR37:
- 需求陈述: 授权操作者可以为外部系统维护集成规格信息（方向、协议、鉴权、策略等）。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR38:
- 需求陈述: 系统可以按版本化集成契约（OpenAPI/Event）执行外部接口交互。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR39:
- 需求陈述: 系统可以对集成失败执行重试、恢复与再处理闭环。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR40:
- 需求陈述: 系统可以对外部接口能力执行版本兼容管理。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR41:
- 需求陈述: 系统可以在外部集成变更前执行契约一致性校验。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。


FR42:
- 需求陈述: 系统可以记录认证、授权变更、负责人变更、关键配置变更等审计事件。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR43:
- 需求陈述: 授权操作者可以按平台域/组织域查询审计事件。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR44:
- 需求陈述: 系统可以将关键业务操作与集成交互关联到可追踪请求标识。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR45:
- 需求陈述: 系统可以保留关键变更的前后状态用于追责与排障。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。


FR46:
- 需求陈述: 授权操作者可以维护受控系统配置（如默认密码策略项）。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR47:
- 需求陈述: 系统可以对受保护系统角色实施不可编辑/不可删除约束。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR48:
- 需求陈述: 系统可以在发布前执行并输出关键能力回归结果（P0、集成链路、核心旅程）。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。


FR49:
- 需求陈述: 系统可以按平台域角色并集计算平台用户有效权限（不使用显式 deny）。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR50:
- 需求陈述: 系统可以在角色状态变更后即时重算并生效用户有效权限。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR51:
- 需求陈述: 系统可以仅基于服务端上下文确定组织域有效租户并拒绝伪造租户上下文。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR52:
- 需求陈述: 系统可以对关键写接口执行幂等判定并返回一致结果。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR53:
- 需求陈述: 系统可以识别并处置 refresh token 重放行为。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR54:
- 需求陈述: 系统可以对负责人变更并发冲突返回可识别冲突结果并支持安全重试。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR55:
- 需求陈述: 授权操作者可以管理外部集成生命周期状态。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR56:
- 需求陈述: 授权操作者可以执行外部集成清单冻结与解冻。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR57:
- 需求陈述: 系统可以记录并追踪集成契约版本变更历史。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR58:
- 需求陈述: 系统可以执行发布前能力回归门禁并输出按能力分组的结果。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR59:
- 需求陈述: 系统可以在创建不存在用户时按默认密码策略初始化账号，并仅保存密码哈希。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR60:
- 需求陈述: 系统可以在将已存在手机号用户加入平台或组织时保持该用户密码不变。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR61:
- 需求陈述: 系统可以支持新建用户首次登录不强制改密，且不提供管理员配置入口。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR62:
- 需求陈述: 系统可以对认证相关接口按手机号维度执行限流并在超限时拒绝请求。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR63:
- 需求陈述: 系统可以对密码登录、验证码登录、验证码发送实施独立限流计数。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR64:
- 需求陈述: 平台管理员可以在创建组织时提交初始管理员手机号；未提交时系统必须拒绝创建并返回标准错误码。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR65:
- 需求陈述: 系统可以在负责人变更后确保新负责人具备组织治理所需最小权限，且旧负责人权限不自动移除。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR66:
- 需求陈述: 系统可以将 `sys_admin` 角色定义为受保护角色，仅允许授权分配，不允许编辑或删除。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR67:
- 需求陈述: 系统可以支持同一用户多会话并发，且 `logout` 仅撤销当前会话。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR68:
- 需求陈述: 系统可以支持平台入口与组织入口并行访问，并确保两入口能力边界一致受控。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR69:
- 需求陈述: 系统可以在关键写接口支持幂等请求语义，并对重复请求返回一致结果。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR70:
- 需求陈述: 系统可以在组织域鉴权中使用服务端确认的有效租户上下文进行最终访问判定。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR71:
- 需求陈述: 系统可以在负责人变更并发场景下返回可识别冲突结果，并支持安全重试。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR72:
- 需求陈述: 系统可以要求每个受保护接口声明权限标识，缺失声明时拒绝发布与运行。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR73:
- 需求陈述: 系统可以维护统一权限清单并在启动时执行幂等同步。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR74:
- 需求陈述: 系统可以在权限树保存时仅保留最终授权结果，并支持前端父子节点联动展示。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR75:
- 需求陈述: 系统可以在角色状态变更为禁用后立即使其权限失效，并保留历史绑定记录。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR76:
- 需求陈述: 系统可以在负责人变更前校验组织与新负责人状态，不满足条件时拒绝变更。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR77:
- 需求陈述: 系统可以在组织软删除时同步失效成员、组织角色与角色绑定关系。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR78:
- 需求陈述: 系统可以在用户软删除时撤销该用户全部 refresh token。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR79:
- 需求陈述: 系统可以在权限或身份关键状态变化后使历史会话失效，并对失效会话返回未授权响应。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。

FR80:
- 需求陈述: 系统可以维护统一错误码体系，并提供可重试语义分层与前端动作映射。
- 验收口径: 采用统一模板 AC1/AC2/AC3，且三项全部通过。
- 测量方法: 发布前执行自动化回归、权限负向回归与审计链路抽样。
- 追踪来源: User Journeys + MVP Scope + Success Criteria。




Total FRs: 80

### Non-Functional Requirements

NFR1:
- 质量目标: 核心 API 在常规核心负载下满足 P95 <= 300ms。
- 量化指标: 核心 API 在常规负载下 `P95 <= 300ms`，持续达标率 `>=99%`（按 5 分钟窗口）。
- 测量方法: APM + 压测平台（5 分钟窗口，7 天滚动统计）。
- 验收证据: 性能压测报告、APM 导出截图、发布门禁记录。

NFR2:
- 质量目标: 关键用户路径（登录、组织创建、角色授权、负责人变更）在交互侧保持可接受响应，不出现持续阻塞。
- 量化指标: 登录、组织创建、角色授权、负责人变更四条关键路径 `P95 <= 2s`，`P99 <= 3s`。
- 测量方法: APM + 压测平台（5 分钟窗口，7 天滚动统计）。
- 验收证据: 性能压测报告、APM 导出截图、发布门禁记录。

NFR3:
- 质量目标: 关键查询与列表能力在分页条件下保持稳定响应。
- 量化指标: 关键列表/查询接口在 `pageSize=20` 条件下 `P95 <= 1.5s`。
- 测量方法: APM + 压测平台（5 分钟窗口，7 天滚动统计）。
- 验收证据: 性能压测报告、APM 导出截图、发布门禁记录。


NFR4:
- 质量目标: 全链路通信必须使用 TLS。
- 量化指标: 公网与内网服务间通信 `100%` 使用 `TLS1.2+`，弱加密套件命中数 `=0`。
- 测量方法: 安全扫描 + 渗透测试 + 权限回归测试。
- 验收证据: 安全测试报告、权限负向用例报告。

NFR5:
- 质量目标: 敏感数据在存储与传输过程中必须受保护（如密码、令牌、敏感配置）。
- 量化指标: 敏感字段（密码哈希、token、密钥配置）静态加密覆盖率 `=100%`，传输加密覆盖率 `=100%`。
- 测量方法: 安全扫描 + 渗透测试 + 权限回归测试。
- 验收证据: 安全测试报告、权限负向用例报告。

NFR6:
- 质量目标: 平台域与组织域权限边界必须强隔离，不得出现越域授权生效。
- 量化指标: 跨域越权测试集阻断率 `=100%`，生产越域授权事件 `=0`。
- 测量方法: 安全扫描 + 渗透测试 + 权限回归测试。
- 验收证据: 安全测试报告、权限负向用例报告。

NFR7:
- 质量目标: 受保护接口默认拒绝未声明授权规则的访问。
- 量化指标: 受保护接口权限声明覆盖率 `=100%`，漏声明接口发布阻断率 `=100%`。
- 测量方法: 安全扫描 + 渗透测试 + 权限回归测试。
- 验收证据: 安全测试报告、权限负向用例报告。

NFR8:
- 质量目标: Refresh token 重放必须可识别并触发统一处置。
- 量化指标: refresh token 重放检测识别率 `=100%`，处置时延 `<=1s`。
- 测量方法: 安全扫描 + 渗透测试 + 权限回归测试。
- 验收证据: 安全测试报告、权限负向用例报告。


NFR9:
- 质量目标: MVP 期服务可用性目标 >= 99.5%。
- 量化指标: MVP 期月度可用性 `>=99.5%`。
- 测量方法: SRE 监控面板 + 演练记录 + 事务一致性测试。
- 验收证据: 可用性报表、故障复盘、演练记录。

NFR10:
- 质量目标: 故障恢复 MTTR <= 30 分钟。
- 量化指标: 生产故障 MTTR `<=30 分钟`。
- 测量方法: SRE 监控面板 + 演练记录 + 事务一致性测试。
- 验收证据: 可用性报表、故障复盘、演练记录。

NFR11:
- 质量目标: P0 相关故障告警发现时长 MTTD <= 5 分钟。
- 量化指标: P0 故障 MTTD `<=5 分钟`。
- 测量方法: SRE 监控面板 + 演练记录 + 事务一致性测试。
- 验收证据: 可用性报表、故障复盘、演练记录。

NFR12:
- 质量目标: 关键事务链路（负责人变更）必须满足全成功/全回滚一致性。
- 量化指标: 负责人变更事务一致性通过率 `=100%`，半成功状态数 `=0`。
- 测量方法: SRE 监控面板 + 演练记录 + 事务一致性测试。
- 验收证据: 可用性报表、故障复盘、演练记录。


NFR13:
- 质量目标: 外部集成调用对可重试错误支持重试，并采用指数退避 + jitter。
- 量化指标: 可重试错误重试成功率 `>=95%`，最大重试次数 `<=5`，退避使用指数 + jitter。
- 测量方法: 契约测试 + 集成联调回归 + 发布门禁检查。
- 验收证据: 契约测试报告、联调报告、门禁日志。

NFR14:
- 质量目标: 写操作集成必须具备幂等保障与去重策略。
- 量化指标: 写操作幂等去重命中正确率 `=100%`，重复写入导致脏数据数 `=0`。
- 测量方法: 契约测试 + 集成联调回归 + 发布门禁检查。
- 验收证据: 契约测试报告、联调报告、门禁日志。

NFR15:
- 质量目标: 集成链路必须具备端到端可追踪标识（request_id / traceparent）。
- 量化指标: 关键集成调用链路追踪字段覆盖率（`request_id`/`traceparent`）`>=99%`。
- 测量方法: 契约测试 + 集成联调回归 + 发布门禁检查。
- 验收证据: 契约测试报告、联调报告、门禁日志。

NFR16:
- 质量目标: 外部接口变更必须通过契约一致性校验与版本治理流程。
- 量化指标: 外部接口变更前契约一致性校验通过率 `=100%`，违规变更合入数 `=0`。
- 测量方法: 契约测试 + 集成联调回归 + 发布门禁检查。
- 验收证据: 契约测试报告、联调报告、门禁日志。

NFR17:
- 质量目标: 外部集成上线必须满足 Integration DoD（合同测试、监控告警、恢复演练）。
- 量化指标: 外部集成上线前 Integration DoD 条目通过率 `=100%`。
- 测量方法: 契约测试 + 集成联调回归 + 发布门禁检查。
- 验收证据: 契约测试报告、联调报告、门禁日志。


NFR18:
- 质量目标: 架构支持从 MVP 向多组织规模增长时横向扩展，不以重写核心权限模型为前提。
- 量化指标: 在 10x 目标规模压测下，核心鉴权与权限计算 `P95 <= 500ms`。
- 测量方法: 容量压测（10x 场景）+ 关键路径探针监控。
- 验收证据: 容量测试报告、可访问性评估报告。

NFR19:
- 质量目标: 组织与成员规模增长时，权限计算与组织切换能力保持可用且可观测。
- 量化指标: 组织切换在 1000 并发会话下 `P95 <= 1s`，错误率 `<0.1%`。
- 测量方法: 容量压测（10x 场景）+ 关键路径探针监控。
- 验收证据: 容量测试报告、可访问性评估报告。


NFR20:
- 质量目标: Web 端核心管理流程满足基础可访问性要求（键盘可达、语义化反馈、可识别错误提示）。
- 量化指标: 核心管理流程满足 `WCAG 2.1 AA`，自动化检测通过率 `>=95%`。
- 测量方法: 可访问性自动化扫描 + 人工走查。
- 验收证据: 容量测试报告、可访问性评估报告。

NFR21:
- 质量目标: 关键操作反馈不依赖单一视觉信号，提供文本可理解提示。
- 量化指标: 关键操作文本反馈覆盖率 `=100%`，不依赖单一颜色/图标信号。
- 测量方法: 可访问性自动化扫描 + 人工走查。
- 验收证据: 容量测试报告、可访问性评估报告。


NFR22:
- 质量目标: 每个关键 NFR 都必须定义对应验证证据与验收归档（压测报告、安全测试、回归结果、演练记录）。
- 量化指标: 关键 NFR 验证证据归档完整率 `=100%`。
- 测量方法: 审计抽样 + 安全基线扫描 + 日志脱敏检测。
- 验收证据: 审计日志样本、安全扫描报告。

NFR23:
- 质量目标: 权限关键路径在 10x 目标规模增长场景需通过基线压测验证。
- 量化指标: 权限关键路径在 10x 规模压测通过率 `=100%`，且越权误放行数 `=0`。
- 测量方法: 审计抽样 + 安全基线扫描 + 日志脱敏检测。
- 验收证据: 审计日志样本、安全扫描报告。

NFR24:
- 质量目标: 默认密码配置必须以受保护配置形式存储，并通过环境密钥进行解密使用。
- 量化指标: 默认密码配置密文存储覆盖率 `=100%`，解密仅允许环境密钥路径。
- 测量方法: 审计抽样 + 安全基线扫描 + 日志脱敏检测。
- 验收证据: 审计日志样本、安全扫描报告。

NFR25:
- 质量目标: 系统不得存储、返回或记录明文密码，日志与审计中需对敏感凭据脱敏。
- 量化指标: 明文密码存储/返回/日志暴露事件 `=0`。
- 测量方法: 审计抽样 + 安全基线扫描 + 日志脱敏检测。
- 验收证据: 审计日志样本、安全扫描报告。

NFR26:
- 质量目标: 认证相关限流采用滑动窗口算法，限流维度为手机号。
- 量化指标: 限流算法按手机号维度执行，统计误差 `<=1 请求/分钟`。
- 测量方法: 认证服务指标 + 限流日志 + 会话一致性回归。
- 验收证据: 认证回归报告、限流命中报表、会话测试报告。

NFR27:
- 质量目标: 限流阈值为 1 分钟内最多 10 次（密码登录、验证码登录、验证码发送分别计数）。
- 量化指标: 每手机号在单接口 1 分钟内阈值 `<=10 次`，超限命中率 `=100%`。
- 测量方法: 认证服务指标 + 限流日志 + 会话一致性回归。
- 验收证据: 认证回归报告、限流命中报表、会话测试报告。

NFR28:
- 质量目标: 超限策略为立即拒绝本次请求，不设置冷却时间。
- 量化指标: 超限请求拒绝响应时延 `<=100ms`，不进入冷却窗口。
- 测量方法: 认证服务指标 + 限流日志 + 会话一致性回归。
- 验收证据: 认证回归报告、限流命中报表、会话测试报告。

NFR29:
- 质量目标: 验证码有效期固定为 15 分钟，并在过期后不可再用于登录。
- 量化指标: 验证码有效期固定 `15 分钟`，过期后可用率 `=0%`。
- 测量方法: 认证服务指标 + 限流日志 + 会话一致性回归。
- 验收证据: 认证回归报告、限流命中报表、会话测试报告。

NFR30:
- 质量目标: 验证码发送按钮倒计时必须基于服务端剩余时间恢复，避免刷新后失真。
- 量化指标: 验证码倒计时刷新前后漂移 `<=3 秒`。
- 测量方法: 认证服务指标 + 限流日志 + 会话一致性回归。
- 验收证据: 认证回归报告、限流命中报表、会话测试报告。

NFR31:
- 质量目标: 会话策略支持无限并发会话，`logout` 不影响其它会话。
- 量化指标: 并发会话支持不少于 `5000` 活跃会话/用户；`logout` 仅影响当前会话准确率 `=100%`。
- 测量方法: 认证服务指标 + 限流日志 + 会话一致性回归。
- 验收证据: 认证回归报告、限流命中报表、会话测试报告。

NFR32:
- 质量目标: 数据库存储统一 UTC，API 时间字段统一 UTC 返回。
- 量化指标: 数据库时间字段 UTC 存储覆盖率 `=100%`，API UTC 返回覆盖率 `=100%`。
- 测量方法: 接口契约测试 + 前端 E2E 展示测试。
- 验收证据: API lint 报告、E2E 报告、接口覆盖清单。

NFR33:
- 质量目标: 前端展示时间统一转换为 `Asia/Shanghai` 并使用统一格式输出。
- 量化指标: 前端时间展示按 `Asia/Shanghai` 转换正确率 `=100%`。
- 测量方法: 接口契约测试 + 前端 E2E 展示测试。
- 验收证据: API lint 报告、E2E 报告、接口覆盖清单。

NFR34:
- 质量目标: 密码规则最小约束为长度 `>= 6`，MVP 不强制复杂度、不限制历史复用、不要求新旧密码不同。
- 量化指标: 密码策略校验通过率 `=100%`：最小长度 `>=6`。
- 测量方法: 静态规则检查 + OpenAPI lint + CI 门禁。
- 验收证据: API lint 报告、E2E 报告、接口覆盖清单。

NFR35:
- 质量目标: 认证失败反馈采用统一外显语义（禁用状态可单独提示），验证码错误/过期/已使用对外统一文案。
- 量化指标: 认证失败外显文案一致性覆盖率 `=100%`。
- 测量方法: 静态规则检查 + OpenAPI lint + CI 门禁。
- 验收证据: API lint 报告、E2E 报告、接口覆盖清单。

NFR36:
- 质量目标: OpenAPI 必须完整覆盖请求字段、响应结构、枚举、分页、错误码与主要错误示例。
- 量化指标: OpenAPI 覆盖率 `=100%`（字段、枚举、分页、错误码、示例）。
- 测量方法: 静态规则检查 + OpenAPI lint + CI 门禁。
- 验收证据: API lint 报告、E2E 报告、接口覆盖清单。

NFR37:
- 质量目标: 上线最小可观测基线必须覆盖鉴权失败率、越权拒绝率、负责人变更失败率。
- 量化指标: 上线观测基线三类指标（鉴权失败率/越权拒绝率/负责人变更失败率）仪表盘覆盖率 `=100%`。
- 测量方法: 可观测平台巡检 + 灾备演练记录。
- 验收证据: 监控仪表盘、灾备演练留档、上线检查单。

NFR38:
- 质量目标: 上线前必须完成最小灾备基线（备份频率、恢复流程、至少一次恢复演练留档）。
- 量化指标: 每季度至少完成 `1` 次恢复演练并通过，恢复演练通过率 `=100%`。
- 测量方法: 可观测平台巡检 + 灾备演练记录。
- 验收证据: 监控仪表盘、灾备演练留档、上线检查单。


Total NFRs: 38

### Additional Requirements

- 约束与假设：
  - MVP 阶段不做外部认证型合规（SOC2/ISO/GDPR），以上线内部安全评审与可追踪审计为门槛。
  - 双域隔离（`platform.*` / `tenant.*`）必须在建模、鉴权、验收三层同时成立。
  - 当前阶段采用单版本交付，不纳入计费分层复杂度。
- 技术约束：
  - 全链路 HTTPS/TLS、敏感数据加密存储、关键管理动作审计留痕。
  - 会话强一致（`session_version`）要求在改密、权限变更、组织状态变更后即时生效。
  - 关键写链路需满足幂等语义（`Idempotency-Key` + 服务端去重）。
- 集成要求：
  - 采用“同步 API + 异步事件/Webhook”双通道，错误契约统一，重试仅针对 `408/429/5xx`。
  - 入站通知要求签名校验、时间窗与 nonce 防重放；异步链路要求 DLQ + 人工重放 Runbook。
  - 外部系统接入需完成契约冻结、合同测试和 Integration DoD 后才可发布。
- 业务与数据约束：
  - 组织负责人变更需按 `org_id` 串行化并在单事务内完成 owner 变更、入组、授权。
  - 软删除语义统一由 `status + deleted_at` 判定，删除一致性巡检为发布门禁项。
  - 组织/用户/角色删除必须触发关联关系级联处理与会话撤销，不允许残留活跃脏关系。
- 实施与交付约束：
  - 权限清单由后端单一事实源维护，受保护接口漏声明权限默认拒绝。
  - CI/CD 门禁至少覆盖类型检查、测试、镜像构建、安全扫描、关键旅程回归。

### PRD Completeness Assessment

- PRD 结构完整，FR/NFR 编号连续且可追溯（FR1-FR80，NFR1-NFR38）。
- 功能范围、质量门槛、发布门禁、风险缓解与集成治理定义充分，可直接用于后续覆盖性校验。
- 附录对数据模型、接口契约、删除一致性、前端约束与交付基线提供了可执行细化，降低实施歧义。

## 3. Epic Coverage Validation

### Epic FR Coverage Extracted

FR1: Epic 1 - 密码登录
FR2: Epic 1 - 验证码登录
FR3: Epic 1 - 会话刷新
FR4: Epic 1 - 退出登录
FR5: Epic 1 - 修改密码后重登
FR6: Epic 1 - 入口域识别
FR7: Epic 1 - 多组织登录后选择
FR8: Epic 1 - 会话内切换组织
FR9: Epic 1 - 无域权限拒绝与标准错误码
FR10: Epic 2 - 创建组织并指定负责人
FR11: Epic 2 - 组织状态维护
FR12: Epic 2 - 变更组织负责人
FR13: Epic 2 - 平台用户治理
FR14: Epic 2 - 平台用户状态治理
FR15: Epic 2 - 平台角色治理
FR16: Epic 2 - 平台权限树配置
FR17: Epic 2 - 平台用户角色分配
FR18: Epic 2 - 新平台成员入平台与授权动作
FR19: Epic 3 - 组织成员治理
FR20: Epic 3 - 组织成员状态治理
FR21: Epic 3 - 组织角色治理
FR22: Epic 3 - 组织权限树配置
FR23: Epic 3 - 组织成员角色分配
FR24: Epic 3 - 成员组织资料维护
FR25: Epic 3 - 负责人变更后立即接管
FR26: Epic 1 - 双域权限命名空间与边界
FR27: Epic 1 - 菜单/按钮/操作可访问控制
FR28: Epic 1 - 未授权一致性拒绝
FR29: Epic 1 - 禁用角色不参与权限计算
FR30: Epic 1 - 变更后权限即时生效
FR31: Epic 1 - 仅平台身份不可进组织工作台
FR32: Epic 3 - 新增成员复用全局身份
FR33: Epic 3 - 跨组织独立成员关系与角色绑定
FR34: Epic 3 - 离组后可重新入组
FR35: Epic 3 - 负责人变更自动补齐关系
FR36: Epic 5 - 入站/出站集成通信
FR37: Epic 5 - 集成规格维护
FR38: Epic 5 - 版本化集成契约交互
FR39: Epic 5 - 集成失败重试与恢复
FR40: Epic 5 - 外部接口版本兼容管理
FR41: Epic 5 - 集成变更前契约校验
FR42: Epic 4 - 审计事件记录
FR43: Epic 4 - 按域查询审计事件
FR44: Epic 4 - 业务与集成交互可追踪关联
FR45: Epic 4 - 关键变更前后状态留痕
FR46: Epic 4 - 受控系统配置治理
FR47: Epic 4 - 受保护系统角色不可编辑/删除
FR48: Epic 4 - 发布前关键能力回归输出
FR49: Epic 1 - 平台角色并集权限计算
FR50: Epic 1 - 角色状态变更后即时重算生效
FR51: Epic 1 - 服务端租户上下文最终判定
FR52: Epic 1 - 关键写接口幂等判定
FR53: Epic 1 - Refresh token 重放识别处置
FR54: Epic 3 - 负责人变更并发冲突与安全重试
FR55: Epic 5 - 集成生命周期状态管理
FR56: Epic 5 - 集成清单冻结/解冻
FR57: Epic 5 - 集成契约版本变更追踪
FR58: Epic 5 - 集成能力回归门禁分组输出
FR59: Epic 1 - 默认密码策略初始化并仅存哈希
FR60: Epic 1 - 既有用户加入不改密码
FR61: Epic 1 - 首登不强制改密且不可配置
FR62: Epic 1 - 认证链路手机号限流
FR63: Epic 1 - 三类认证动作独立限流计数
FR64: Epic 2 - 创建组织必须初始管理员手机号
FR65: Epic 3 - 负责人变更后最小治理权限保障
FR66: Epic 2 - sys_admin 受保护角色约束
FR67: Epic 1 - 多会话并发与 logout 仅当前会话
FR68: Epic 1 - 平台/组织双入口并行访问
FR69: Epic 1 - 关键写接口重复请求一致返回
FR70: Epic 1 - 组织域服务端有效租户鉴权
FR71: Epic 3 - 负责人并发场景冲突可识别可重试
FR72: Epic 1 - 受保护接口必须声明权限标识
FR73: Epic 1 - 统一权限清单启动幂等同步
FR74: Epic 4 - 权限树仅保留最终授权结果
FR75: Epic 4 - 角色禁用后权限立即失效
FR76: Epic 3 - 负责人变更前置状态校验
FR77: Epic 3 - 组织软删除级联失效
FR78: Epic 4 - 用户软删除撤销全部 refresh token
FR79: Epic 1 - 关键状态变化使历史会话失效
FR80: Epic 1 - 统一错误码与前端动作映射

Total FRs in epics: 80

### Coverage Matrix

| FR Number | PRD Requirement | Epic Coverage | Status |
| --------- | --------------- | ------------- | ------ |
| FR1 | 用户可以使用手机号+密码登录系统。 | Epic 1 - 密码登录 | ✓ Covered |
| FR2 | 用户可以使用手机号+验证码登录系统。 | Epic 1 - 验证码登录 | ✓ Covered |
| FR3 | 用户可以刷新登录会话并保持访问连续性。 | Epic 1 - 会话刷新 | ✓ Covered |
| FR4 | 用户可以退出当前会话。 | Epic 1 - 退出登录 | ✓ Covered |
| FR5 | 用户可以修改密码并在会话更新后重新登录。 | Epic 1 - 修改密码后重登 | ✓ Covered |
| FR6 | 系统可以根据登录入口识别访问域（平台域或组织域）。 | Epic 1 - 入口域识别 | ✓ Covered |
| FR7 | 多组织用户可以在登录后选择目标组织再进入工作台。 | Epic 1 - 多组织登录后选择 | ✓ Covered |
| FR8 | 组织用户可以在会话内切换组织。 | Epic 1 - 会话内切换组织 | ✓ Covered |
| FR9 | 系统可以在用户无有效域权限时拒绝进入对应域，并返回错误码 `AUTH-403-NO-DOMAIN` 与标准提示文案。 | Epic 1 - 无域权限拒绝与标准错误码 | ✓ Covered |
| FR10 | 平台管理员可以创建组织并指定组织负责人。 | Epic 2 - 创建组织并指定负责人 | ✓ Covered |
| FR11 | 平台管理员可以维护组织状态（启用/禁用）。 | Epic 2 - 组织状态维护 | ✓ Covered |
| FR12 | 平台管理员可以变更组织负责人。 | Epic 2 - 变更组织负责人 | ✓ Covered |
| FR13 | 平台管理员可以创建与维护平台用户。 | Epic 2 - 平台用户治理 | ✓ Covered |
| FR14 | 平台管理员可以维护平台用户状态。 | Epic 2 - 平台用户状态治理 | ✓ Covered |
| FR15 | 平台管理员可以创建与维护平台角色（受保护系统角色除外编辑/删除）。 | Epic 2 - 平台角色治理 | ✓ Covered |
| FR16 | 平台管理员可以配置平台角色权限树。 | Epic 2 - 平台权限树配置 | ✓ Covered |
| FR17 | 平台管理员可以向平台用户分配1 至 5 个平台角色。 | Epic 2 - 平台用户角色分配 | ✓ Covered |
| FR18 | 新增平台成员在分配1 至 5 个平台角色后，可以进入平台并执行授权范围内操作。 | Epic 2 - 新平台成员入平台与授权动作 | ✓ Covered |
| FR19 | 组织负责人/组织管理员可以创建与维护组织成员。 | Epic 3 - 组织成员治理 | ✓ Covered |
| FR20 | 组织负责人/组织管理员可以维护组织成员状态。 | Epic 3 - 组织成员状态治理 | ✓ Covered |
| FR21 | 组织负责人/组织管理员可以创建与维护组织角色（受保护系统角色除外编辑/删除）。 | Epic 3 - 组织角色治理 | ✓ Covered |
| FR22 | 组织负责人/组织管理员可以配置组织角色权限树。 | Epic 3 - 组织权限树配置 | ✓ Covered |
| FR23 | 组织负责人/组织管理员可以向组织成员分配1 至 5 个组织角色。 | Epic 3 - 组织成员角色分配 | ✓ Covered |
| FR24 | 组织负责人/组织管理员可以维护成员的组织内资料（如显示名、部门）。 | Epic 3 - 成员组织资料维护 | ✓ Covered |
| FR25 | 负责人变更后，新负责人可以立即完成组织治理接管。 | Epic 3 - 负责人变更后立即接管 | ✓ Covered |
| FR26 | 系统可以维护平台域与组织域独立的权限命名空间与授权边界。 | Epic 1 - 双域权限命名空间与边界 | ✓ Covered |
| FR27 | 系统可以按有效权限控制菜单、按钮与受保护操作的可访问性。 | Epic 1 - 菜单/按钮/操作可访问控制 | ✓ Covered |
| FR28 | 系统可以对未授权访问执行一致性拒绝。 | Epic 1 - 未授权一致性拒绝 | ✓ Covered |
| FR29 | 系统可以在权限计算中排除禁用角色。 | Epic 1 - 禁用角色不参与权限计算 | ✓ Covered |
| FR30 | 系统可以在角色或授权变更后即时反映最新访问结果。 | Epic 1 - 变更后权限即时生效 | ✓ Covered |
| FR31 | 系统可以阻止仅平台身份且无组织关系的用户进入组织工作台。 | Epic 1 - 仅平台身份不可进组织工作台 | ✓ Covered |
| FR32 | 系统可以在组织新增成员时复用已存在全局用户身份。 | Epic 3 - 新增成员复用全局身份 | ✓ Covered |
| FR33 | 系统可以为同一用户在不同组织维护独立成员关系与角色绑定。 | Epic 3 - 跨组织独立成员关系与角色绑定 | ✓ Covered |
| FR34 | 系统可以在成员离组后支持后续重新入组并形成新的有效成员关系。 | Epic 3 - 离组后可重新入组 | ✓ Covered |
| FR35 | 系统可以在组织负责人变更时自动完成必要的成员关系与角色关系补齐。 | Epic 3 - 负责人变更自动补齐关系 | ✓ Covered |
| FR36 | 系统可以支持入站与出站的外部系统通信能力。 | Epic 5 - 入站/出站集成通信 | ✓ Covered |
| FR37 | 授权操作者可以为外部系统维护集成规格信息（方向、协议、鉴权、策略等）。 | Epic 5 - 集成规格维护 | ✓ Covered |
| FR38 | 系统可以按版本化集成契约（OpenAPI/Event）执行外部接口交互。 | Epic 5 - 版本化集成契约交互 | ✓ Covered |
| FR39 | 系统可以对集成失败执行重试、恢复与再处理闭环。 | Epic 5 - 集成失败重试与恢复 | ✓ Covered |
| FR40 | 系统可以对外部接口能力执行版本兼容管理。 | Epic 5 - 外部接口版本兼容管理 | ✓ Covered |
| FR41 | 系统可以在外部集成变更前执行契约一致性校验。 | Epic 5 - 集成变更前契约校验 | ✓ Covered |
| FR42 | 系统可以记录认证、授权变更、负责人变更、关键配置变更等审计事件。 | Epic 4 - 审计事件记录 | ✓ Covered |
| FR43 | 授权操作者可以按平台域/组织域查询审计事件。 | Epic 4 - 按域查询审计事件 | ✓ Covered |
| FR44 | 系统可以将关键业务操作与集成交互关联到可追踪请求标识。 | Epic 4 - 业务与集成交互可追踪关联 | ✓ Covered |
| FR45 | 系统可以保留关键变更的前后状态用于追责与排障。 | Epic 4 - 关键变更前后状态留痕 | ✓ Covered |
| FR46 | 授权操作者可以维护受控系统配置（如默认密码策略项）。 | Epic 4 - 受控系统配置治理 | ✓ Covered |
| FR47 | 系统可以对受保护系统角色实施不可编辑/不可删除约束。 | Epic 4 - 受保护系统角色不可编辑/删除 | ✓ Covered |
| FR48 | 系统可以在发布前执行并输出关键能力回归结果（P0、集成链路、核心旅程）。 | Epic 4 - 发布前关键能力回归输出 | ✓ Covered |
| FR49 | 系统可以按平台域角色并集计算平台用户有效权限（不使用显式 deny）。 | Epic 1 - 平台角色并集权限计算 | ✓ Covered |
| FR50 | 系统可以在角色状态变更后即时重算并生效用户有效权限。 | Epic 1 - 角色状态变更后即时重算生效 | ✓ Covered |
| FR51 | 系统可以仅基于服务端上下文确定组织域有效租户并拒绝伪造租户上下文。 | Epic 1 - 服务端租户上下文最终判定 | ✓ Covered |
| FR52 | 系统可以对关键写接口执行幂等判定并返回一致结果。 | Epic 1 - 关键写接口幂等判定 | ✓ Covered |
| FR53 | 系统可以识别并处置 refresh token 重放行为。 | Epic 1 - Refresh token 重放识别处置 | ✓ Covered |
| FR54 | 系统可以对负责人变更并发冲突返回可识别冲突结果并支持安全重试。 | Epic 3 - 负责人变更并发冲突与安全重试 | ✓ Covered |
| FR55 | 授权操作者可以管理外部集成生命周期状态。 | Epic 5 - 集成生命周期状态管理 | ✓ Covered |
| FR56 | 授权操作者可以执行外部集成清单冻结与解冻。 | Epic 5 - 集成清单冻结/解冻 | ✓ Covered |
| FR57 | 系统可以记录并追踪集成契约版本变更历史。 | Epic 5 - 集成契约版本变更追踪 | ✓ Covered |
| FR58 | 系统可以执行发布前能力回归门禁并输出按能力分组的结果。 | Epic 5 - 集成能力回归门禁分组输出 | ✓ Covered |
| FR59 | 系统可以在创建不存在用户时按默认密码策略初始化账号，并仅保存密码哈希。 | Epic 1 - 默认密码策略初始化并仅存哈希 | ✓ Covered |
| FR60 | 系统可以在将已存在手机号用户加入平台或组织时保持该用户密码不变。 | Epic 1 - 既有用户加入不改密码 | ✓ Covered |
| FR61 | 系统可以支持新建用户首次登录不强制改密，且不提供管理员配置入口。 | Epic 1 - 首登不强制改密且不可配置 | ✓ Covered |
| FR62 | 系统可以对认证相关接口按手机号维度执行限流并在超限时拒绝请求。 | Epic 1 - 认证链路手机号限流 | ✓ Covered |
| FR63 | 系统可以对密码登录、验证码登录、验证码发送实施独立限流计数。 | Epic 1 - 三类认证动作独立限流计数 | ✓ Covered |
| FR64 | 平台管理员可以在创建组织时提交初始管理员手机号；未提交时系统必须拒绝创建并返回标准错误码。 | Epic 2 - 创建组织必须初始管理员手机号 | ✓ Covered |
| FR65 | 系统可以在负责人变更后确保新负责人具备组织治理所需最小权限，且旧负责人权限不自动移除。 | Epic 3 - 负责人变更后最小治理权限保障 | ✓ Covered |
| FR66 | 系统可以将 `sys_admin` 角色定义为受保护角色，仅允许授权分配，不允许编辑或删除。 | Epic 2 - sys_admin 受保护角色约束 | ✓ Covered |
| FR67 | 系统可以支持同一用户多会话并发，且 `logout` 仅撤销当前会话。 | Epic 1 - 多会话并发与 logout 仅当前会话 | ✓ Covered |
| FR68 | 系统可以支持平台入口与组织入口并行访问，并确保两入口能力边界一致受控。 | Epic 1 - 平台/组织双入口并行访问 | ✓ Covered |
| FR69 | 系统可以在关键写接口支持幂等请求语义，并对重复请求返回一致结果。 | Epic 1 - 关键写接口重复请求一致返回 | ✓ Covered |
| FR70 | 系统可以在组织域鉴权中使用服务端确认的有效租户上下文进行最终访问判定。 | Epic 1 - 组织域服务端有效租户鉴权 | ✓ Covered |
| FR71 | 系统可以在负责人变更并发场景下返回可识别冲突结果，并支持安全重试。 | Epic 3 - 负责人并发场景冲突可识别可重试 | ✓ Covered |
| FR72 | 系统可以要求每个受保护接口声明权限标识，缺失声明时拒绝发布与运行。 | Epic 1 - 受保护接口必须声明权限标识 | ✓ Covered |
| FR73 | 系统可以维护统一权限清单并在启动时执行幂等同步。 | Epic 1 - 统一权限清单启动幂等同步 | ✓ Covered |
| FR74 | 系统可以在权限树保存时仅保留最终授权结果，并支持前端父子节点联动展示。 | Epic 4 - 权限树仅保留最终授权结果 | ✓ Covered |
| FR75 | 系统可以在角色状态变更为禁用后立即使其权限失效，并保留历史绑定记录。 | Epic 4 - 角色禁用后权限立即失效 | ✓ Covered |
| FR76 | 系统可以在负责人变更前校验组织与新负责人状态，不满足条件时拒绝变更。 | Epic 3 - 负责人变更前置状态校验 | ✓ Covered |
| FR77 | 系统可以在组织软删除时同步失效成员、组织角色与角色绑定关系。 | Epic 3 - 组织软删除级联失效 | ✓ Covered |
| FR78 | 系统可以在用户软删除时撤销该用户全部 refresh token。 | Epic 4 - 用户软删除撤销全部 refresh token | ✓ Covered |
| FR79 | 系统可以在权限或身份关键状态变化后使历史会话失效，并对失效会话返回未授权响应。 | Epic 1 - 关键状态变化使历史会话失效 | ✓ Covered |
| FR80 | 系统可以维护统一错误码体系，并提供可重试语义分层与前端动作映射。 | Epic 1 - 统一错误码与前端动作映射 | ✓ Covered |

### Missing Requirements

## Missing FR Coverage

### Critical Missing FRs

- 无。
### FRs in Epics But Not in PRD

- 无。

### Coverage Statistics

- Total PRD FRs: 80
- FRs covered in epics: 80
- Coverage percentage: 100.00%
- Missing FRs: 0
- FRs in epics but not in PRD: 0

## 4. UX Alignment Assessment

### UX Document Status

- Found：`_bmad-output/planning-artifacts/ux-design-specification.md`
- Supplemental UX artifacts（未作为主评估输入）：`_bmad-output/planning-artifacts/ux-design-directions.html`、`_bmad-output/planning-artifacts/ux-color-themes.html`

### Alignment Issues

- PRD ↔ UX（部分覆盖缺口）：
  - PRD 明确了 6 条关键 Journey（含 Journey 6 运维治理），UX 当前详细流程主要覆盖 3 条（组织开通、负责人变更、首轮接管）。
  - 运维治理（告警发现、门禁结果查看、恢复操作）在 UX 中仅有原则性描述，尚缺可执行页面流与交互细节。
- UX ↔ Architecture（细节落地缺口）：
  - PRD 要求前端时间统一按 `Asia/Shanghai` 展示（NFR33），UX 已定义统一时间格式 `yyyy-mm-dd hh:mm`，但 Architecture 当前未显式固化“展示时区转换”实现约束（仅包含 dayjs 依赖与一致性交互约束）。

### Warnings

- 非阻断告警：移动端策略在 UX 中有定义（移动端详情页与断点策略），Architecture 仍标注移动端为 Post-MVP 延后决策；若后续提前引入移动端范围，需要先补架构决策与门禁标准再实施。
- 非阻断告警：UX 补充材料（HTML 方向稿/色板稿）未纳入本轮主输入，若设计方向发生更新，应同步回写到 `ux-design-specification.md` 以避免实现口径漂移。

## 5. Epic Quality Review

### Review Scope

- Reviewed epics: 5
- Reviewed stories: 35
- Checked dimensions: 用户价值导向、Epic 独立性、故事可独立完成性、前向依赖、AC 可测性、Starter Template 与 Greenfield 要求

### Findings By Severity

#### 🔴 Critical Violations

- 无。

#### 🟠 Major Issues

1. Story 4.6 存在“跨能力捆绑”导致的独立完成风险（`epics.md:989`）
- 现状：同一 Story 同时承载 FR48（发布回归门禁）与 FR78（用户软删会话撤销），目标域分别属于发布治理与账号生命周期。
- 风险：实施节奏不同步时，单 Story 难以在一个迭代内稳定验收，且回归范围过大。
- 建议：拆分为两个可独立验收 Story（门禁报告链路 / 软删会话撤销链路），分别挂接独立 DoD 与测试集。

2. Epic 2 与 Epic 3 在“负责人变更”链路存在边界耦合风险（`epics.md:709`, `epics.md:823`, `epics.md:847`）
- 现状：Epic 2 的 Story 2.6 定义“平台侧负责人变更入口”，而变更后接管保障、并发冲突处理等关键可用性能力在 Epic 3。
- 风险：若仅按 Epic 序列推进，Epic 2 的业务结果可能对 Epic 3 形成隐式前向依赖（入口已可用，但闭环能力未齐全）。
- 建议：在 Story 2.6 明确“最小闭环边界”（可执行到何种完成态），并把跨 Epic 依赖写成后向依赖契约（例如接口契约 + 错误语义 + 审计事件要求）。

#### 🟡 Minor Concerns

1. Story 1.1 为技术基座型故事（`epics.md:290`）
- 说明：该项符合架构“Starter Template 必须先落地”的特例要求，但其用户价值较间接。
- 建议：在验收中持续绑定“可运行薄切片”证明（认证最小链路可跑通），避免沦为纯工程里程碑。

2. Story 1.10 FR 覆盖面较宽（6 条 FR，`epics.md:556`）
- 说明：主题仍然一致（错误码/可重试/幂等语义），但实现面偏大。
- 建议：保持当前 Story 编号不变前提下，拆为子任务并设定分层验收（错误码契约、幂等重复提交、限流反馈映射）。

### Compliance Checklist

- [x] Epic delivers user value
- [x] Epic can function independently (with noted coupling risk on owner-transfer boundary)
- [x] Stories appropriately sized (with 2 major sizing/coupling concerns)
- [x] No explicit forward dependencies found in story text
- [x] Database tables created when needed (Story 1.1 明确不预建未来无关业务表)
- [x] Clear acceptance criteria (Given/When/Then structure present across stories)
- [x] Traceability to FRs maintained

### Special Implementation Checks

- Starter template requirement: ✅ Satisfied（Story 1.1 明确 Nx Monorepo + Docker 基座初始化）
- Greenfield indicators: ✅ Satisfied（初始环境、工程骨架、迁移基线、早期门禁均已覆盖）

## Summary and Recommendations

### Overall Readiness Status

NEEDS WORK

### Critical Issues Requiring Immediate Action

- 需拆分 Story 4.6（发布门禁能力与用户软删会话撤销）以恢复故事独立可交付性，避免单故事跨域耦合导致验收与回归失焦。
- 需明确 Story 2.6 与 Epic 3 的负责人变更闭环边界，消除“入口先上线、闭环后补齐”的隐式前向依赖风险。

### Recommended Next Steps

1. 拆分并重写 `Story 4.6`：分别定义“发布门禁报告链路（FR48）”与“用户软删会话撤销（FR78）”的独立 AC、测试集与 DoD。
2. 为 `Story 2.6` 增补边界契约：明确最小可交付闭环、失败语义、审计字段与与 Epic 3 的后向依赖接口，防止实现阶段职责漂移。
3. 补齐 UX 运维治理流：新增 Journey 6 的页面/交互流（告警发现、门禁结果、恢复操作）并同步到 Architecture 映射。
4. 在 Architecture 明确前端时区约束：补充 `Asia/Shanghai` 展示转换规则、测试点和发布门禁检查项，闭合 PRD NFR33。

### Final Note

本次评估识别了 6 项需要关注的问题（2 项 Major、2 项 Minor、2 项非阻断 Warning），覆盖 Epic 结构质量与 UX/Architecture 对齐两大类别。建议先完成上述关键整改再进入大规模实施；若选择直接推进，应将整改项并入首批冲刺并设置强制门禁。

**Assessment Date:** 2026-02-11
**Assessor:** Winston (Architect Agent)
